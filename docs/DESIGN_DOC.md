# 🎮 游戏设计文档

**项目**: Wasteland Castle (荒原城堡)
**最后更新**: 2026-01-12
**文档类型**: 游戏设计（不涉及代码实现）

---

## 📖 概述

### 游戏定位
**"吸血鬼幸存者的塔防版"**

一款结合Roguelike、策略和自动战斗的横版卷轴游戏。玩家通过随机生成的组件构建移动城堡，在废土中击败一波又一波的敌人。

### 核心设计理念

1. **建筑Roguelike**（核心） - 随机组件生成，每次游戏不同体验
2. **策略搭配**（核心） - 组件摆放和邻接加成的深度
3. **战斗爽快感**（次要） - 自动战斗的观赏性和打击反馈

### 目标玩家
- 喜欢Roguelike游戏的玩家
- 喜欢策略和搭配系统的玩家
- 喜欢休闲自动战斗的玩家

---

## 🔄 核心游戏循环

```
安全屋整备阶段
  ↓
[购买组件] - Roguelike随机性
  ↓
[策略摆放] - 网格布局和邻接加成
  ↓
[确认出发] - 开始新的旅途
  ↓
战斗阶段
  ↓
[自动战斗] - 观赏炮塔攻击
  ↓
[采集资源] - 光标互动
  ↓
[击败敌人] - 波次推进
  ↓
[获得奖励] - 资源和经验
  ↓
回到安全屋 - 新的组件选择
  ↓
循环...
```

### 循环节奏
- **安全屋阶段**: 2-5分钟（思考、购买、布局）
- **战斗阶段**: 5-10分钟（10波敌人）
- **单次游戏**: 15-30分钟

---

## 🎲 Roguelike系统

### 组件随机生成

每次进入安全屋，商店生成3-5个随机组件。

#### 组件类型（4种）
| 类型 | 功能 | 基础价格 |
|------|------|----------|
| **核心(CORE)** | 生命核心，被摧毁则游戏结束 | 60金币 |
| **武器(WEAPON)** | 自动攻击敌人 | 20金币 |
| **护甲(ARMOR)** | 增加防御和生命 | 15金币 |
| **增幅(BOOSTER)** | 提供增益效果 | 25金币 |

#### 组件品质（4级）
| 品质 | 概率 | 价格倍数 | 属性加成 |
|------|------|----------|----------|
| **普通** | 70% | ×1.0 | 基础属性 |
| **罕见** | 20% | ×1.5 | +50%属性 |
| **稀有** | 8% | ×2.0 | +100%属性 |
| **史诗** | 2% | ×3.0 | +200%属性 |

### Roguelike要素

**不同游戏体验**：
- 组件类型随机 → 不同构建思路
- 品质随机 → 强度差异
- 商店锁定机制 → 等待理想组件的策略

**渐进式解锁**（未来计划）：
- 随着游戏进度解锁新组件
- 解锁新的增幅效果
- 解锁更高难度

---

## 🧩 策略摆放系统

### 网格系统

**5×5网格**：
- 载具上有25个格子
- 每个组件占据1个格子
- 布局自由度高

### 邻接加成机制

**核心策略深度来源**

组件之间如果相邻，会产生额外加成效果：

#### 加成类型
| 组合 | 效果 | 示例 |
|------|------|------|
| **武器 + 武器** | 攻击力+10% | 两个炮塔相邻 |
| **武器 + 核心** | 射速+15% | 炮塔贴近核心 |
| **护甲 + 核心** | 生命+20% | 装甲保护核心 |
| **护甲 + 护甲** | 防御+15% | 装甲墙 |
| **增幅 + 任意** | 效果增强 | 增幅器扩散 |

#### 策略考量
- **进攻型布局**: 武器集中，最大化火力
- **防御型布局**: 护甲包围核心，提高生存
- **平衡型布局**: 火力和防御兼顾
- **增幅型布局**: 用增幅器强化关键组件

**示例布局**：
```
[空] [空] [武] [空] [空]
[空] [武] [核] [武] [空]
[甲] [甲] [核] [甲] [甲]
[空] [武] [核] [武] [空]
[空] [空] [武] [空] [空]
```
- 3个核心（生命冗余）
- 武器环绕核心（邻接加成）
- 护甲底层保护（防御）

---

## ⚔️ 战斗系统

### 战斗流程

```
进入战斗
  ↓
载具自动向右移动
  ↓
敌人从右侧出现
  ↓
炮塔自动锁定并攻击
  ↓
敌人被击败 → 掉落资源
  ↓
波次结束 → 准备期
  ↓
下一波敌人...
```

### 波次系统

**10波渐进式难度**：
- 第1波：10个敌人，HP 50
- 第2波：12个敌人，HP 60
- 第3波：14个敌人，HP 70
- ...
- 第10波：28个敌人，HP 140（Boss难度）

**准备期**：
- 每波之间有8秒准备时间
- 可以采集资源
- 可以规划下一步策略

### 自动战斗

**玩家不直接控制战斗**：
- 炮塔自动攻击最近敌人
- 核心被攻击时载具受到伤害
- 玩家关注：观察战斗 + 采集资源

**战斗反馈**：
- 伤害数字浮现
- 粒子效果
- 敌人被击败动画
- 资源掉落飞入

---

## 💎 资源系统

### 三种资源

| 资源 | 名称 | 用途 | 获取方式 |
|------|------|------|----------|
| 🔴 **Red** | 弹药/能源 | 武器射击消耗 | 击败敌人、采集节点 |
| 🔵 **Blue** | 建材/矿石 | 修复组件 | 采集节点、完成旅途 |
| 🟡 **Gold** | 金币/芯片 | 购买组件、刷新商店 | 击败敌人奖励、完成旅途 |

### 资源平衡

**初始资源**：
- Red: 200
- Blue: 100
- Gold: 150

**资源循环**：
```
消耗弹药战斗 → 击败敌人掉落金币 → 购买更强组件 → 击败更难敌人
                                    ↑
                              采集资源补充弹药
```

**资源紧张度**：
- 弹药消耗快，需要持续采集
- 金币有限，购买需谨慎
- 建材用于修复，不能忽视防御

---

## 🏪 商店系统

### 商店机制

**随机商品**：
- 每次进入安全屋，商店刷新3-5个随机组件
- 品质和类型完全随机（基于概率）

**刷新功能**：
- 消耗5金币手动刷新
- 锁定的商品不会刷新（右键锁定）

**策略性**：
- 等待理想组件 vs 立即购买
- 锁定高品质组件，等攒够钱
- 刷新寻找特定类型

### 商店交互

```
进入安全屋
  ↓
查看商店（右侧面板）
  ↓
左键点击购买 / 右键锁定
  ↓
组件进入仓库（底部）
  ↓
拖拽到网格放置
```

---

## 🛠️ 修复系统

### 组件损伤

**战斗中组件会受损**：
- 敌人接触到组件
- 碰撞造成伤害
- 组件HP降低

**组件状态**：
- 满血：正常运作
- 受损：功能正常，但HP降低
- 摧毁：组件失效（核心摧毁=游戏结束）

### 修复功能

**在安全屋修复**：
- 消耗建材(Blue资源)
- 恢复组件HP
- 修复成本 = 损失HP数量

**修复策略**：
- 优先修复核心
- 损伤严重的组件修复性价比低，考虑替换
- 平衡修复成本和购买新组件

---

## 🎯 难度系统

### 可选难度（未来计划）

**简单模式**：
- 更多初始资源
- 敌人更弱
- 适合新手

**普通模式**：
- 当前平衡
- 需要一定策略

**困难模式**：
- 资源更紧张
- 敌人更强
- 需要精细布局

**地狱模式**：
- 极限挑战
- 仅限高手

### 旅途编号

**渐进式难度**：
- 旅途#1：基础难度
- 旅途#2：敌人+10% HP
- 旅途#3：敌人+20% HP
- ...

**循环挑战**：
- 完成10波敌人后，回到安全屋
- 继续下一个更难的旅途
- 追求最高旅途编号

---

## 🎨 用户体验设计

### 核心体验目标

**让玩家感受到**：
1. **策略搭配的乐趣** - 每次布局都有新发现
2. **Roguelike的紧张感** - 随机性带来的期待和挑战
3. **战斗的爽快感** - 炮火纷飞的观赏性

### 视觉反馈

**清晰的信息传达**：
- 伤害数字跳出
- 资源掉落动画
- 组件状态颜色编码
- 光标状态切换

**爽快的战斗反馈**：
- 敌人被击败的爆炸效果
- 粒子特效
- 屏幕抖动（撞击时）
- 音效（未来计划）

### UI设计原则

**功能性优先**：
- 商店清晰展示（右侧）
- 仓库方便访问（底部）
- 网格对齐辅助
- 资源状态一目了然

**状态清晰**：
- 当前游戏状态（安全屋/旅途）
- 当前波次和剩余敌人
- 资源数量实时显示
- 组件HP可视化

---

## 🎁 奖励系统

### 战斗奖励

**击败敌人**：
- 掉落弹药(Red)
- 获得金币(Gold)
- 每个敌人 = 2金币

**完成旅途**：
- 根据击杀数额外金币
- 回到安全屋继续游戏

### 渐进式解锁（未来计划）

**成就系统**：
- 击败100个敌人
- 完成10次旅途
- 使用特定组合获胜

**解锁内容**：
- 新组件类型
- 新增幅效果
- 新敌人类型
- 新难度

---

## 🎲 Roguelike深度

### Run的多样性

**每次游戏不同**：
- 商店随机 → 不同组件选择
- 品质随机 → 强度差异
- 布局自由 → 无限组合

**策略深度**：
- 根据商店调整构建方向
- 适应随机性的能力
- 资源管理的权衡

### 元进度（未来计划）

**永久升级**：
- 解锁新组件
- 提升基础属性
- 解锁新机制

**保持Roguelike纯粹性**：
- 元进度不应过强
- 技巧和策略仍是核心
- 解锁增加选择，不降低难度

---

## 📊 平衡设计目标

### 资源平衡

**资源紧张但不绝望**：
- 弹药需要采集但不会耗尽
- 金币有限但足够购买2-3个组件
- 建材紧张鼓励防御而非无限修复

### 组件平衡

**没有绝对强弱**：
- 核心必须但脆弱
- 武器强力但消耗弹药
- 护甲防御但不输出
- 增幅效果多样但单独无用

**组合大于个体**：
- 邻接加成鼓励搭配
- 单一类型堆叠效果递减
- 多样化构建鼓励

### 难度曲线

**前期友好，后期挑战**：
- 第1-3波：新手适应
- 第4-7波：考验构建
- 第8-10波：极限挑战

**可控的失败**：
- 玩家看得出自己失败的原因
- 下次可以通过策略改进
- 不是运气，是技巧

---

## 🔮 未来扩展方向

### 短期计划
- 完善现有系统平衡
- 优化视觉和音效反馈
- 添加更多组件类型

### 中期计划
- 成就和解锁系统
- 可选难度
- 更多敌人类型和Boss

### 长期计划
- 元进度系统
- 多种载具类型
- 故事模式

---

## 📝 设计原则总结

1. **Roguelike优先** - 随机性是核心乐趣
2. **策略深度** - 搭配比单个组件重要
3. **自动战斗** - 观赏性而非操作
4. **清晰反馈** - 玩家理解发生了什么
5. **公平挑战** - 失败归因于策略而非运气

---

**本文档描述"是什么"和"为什么"，技术实现请参考开发文档。**
