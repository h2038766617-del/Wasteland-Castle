# 🎯 核心指导思想

**最后更新**: 2026-01-12

本文档总结了项目的核心指导思想，所有开发活动必须遵循这些原则。

---

## ✅ 已明确的指导思想

### 1. 开发哲学：稳定优先 🔴

**来源**: 用户反馈 + CRITICAL_FIX_CURSOR.md

```
宁可少功能，也要保证现有功能100%可用
```

**具体要求**：
- ✅ 基础交互必须完美（光标可见、可点击）
- ✅ 核心功能必须可用（商店购买、组件放置、战斗）
- ✅ 不追求功能数量，追求功能质量
- ❌ 禁止"先实现再修复"的方式
- ❌ 禁止跳过冒烟测试

**黄金法则**：
> **如果用户连光标都看不到，那再完美的商店逻辑也毫无意义！**

---

### 2. 问题优先级：P0-P3 分级

**来源**: CRITICAL_FIX_CURSOR.md

```
P0 - 致命（游戏无法启动/交互）
  → 光标显示、点击检测、Canvas渲染
  → 发现后立即停止所有工作，优先修复

P1 - 严重（核心功能不可用）
  → 商店购买、战斗系统、组件放置
  → 当天必须修复

P2 - 一般（功能可用但体验差）
  → 价格平衡、UI反馈
  → 1周内修复

P3 - 优化（锦上添花）
  → 动画效果、音效、粒子特效
  → 待定
```

**实际案例**：
- ❌ 错误：先调整价格平衡（P2），忽略光标不可见（P0）
- ✅ 正确：先修复光标显示（P0），再优化价格（P2）

---

### 3. 迭代流程：四阶段渐进式

**来源**: CRITICAL_FIX_CURSOR.md

```
第一阶段：先跑起来
  → 能启动、能看到画面、能看到光标、能点击
  → 最基础的交互必须正常

第二阶段：再能用
  → 核心功能正常工作
  → 商店购买→组件放置→战斗→回到安全屋

第三阶段：然后好用
  → 体验优化、平衡调整
  → 价格合理、难度适中、UI友好

第四阶段：最后爽用
  → 动画、音效、特效
  → 打击感、视觉冲击
```

**禁止跳跃**：
- ❌ 不能跳过第一阶段直接做第三阶段
- ❌ 不能假设前一阶段已完成
- ✅ 每个阶段都必须经过验证才能进入下一阶段

---

### 4. 测试要求：冒烟测试优先

**来源**: CRITICAL_FIX_CURSOR.md

**每次提交前必须做的冒烟测试**：
```
✅ 能启动吗？
✅ 能看到画面吗？
✅ 能看到光标吗？
✅ 能点击UI吗？
✅ 核心功能能用吗？
```

**禁止假设**：
- ❌ 假设光标是可见的
- ❌ 假设点击检测是正常的
- ❌ 假设Canvas渲染正常
- ✅ 必须实际运行验证
- ✅ 从用户视角测试

---

### 5. MVP（最小可玩版本）定义

**来源**: CRITICAL_FIX_CURSOR.md 测试清单

```
玩家至少要能完成以下完整流程：

1. 启动游戏
   ✓ 看到光标
   ✓ 看到安全屋UI
   ✓ 看到商店（右侧）
   ✓ 看到仓库（底部）

2. 在商店购买商品
   ✓ 光标可见
   ✓ 点击商品有反馈
   ✓ 金币扣除
   ✓ 商品进入仓库

3. 拖拽组件到网格
   ✓ 可以拖拽
   ✓ 可以放置
   ✓ 放置后组件显示在网格

4. 按Space进入战斗
   ✓ 系统光标隐藏
   ✓ 游戏内光标出现
   ✓ 战斗正常进行

5. 完成旅途
   ✓ 回到安全屋
   ✓ 系统光标重新出现
   ✓ 可以继续购买
```

**这就是MVP**。任何一步失败，都不算完成MVP。

---

### 6. 分层验证原则

**来源**: CRITICAL_FIX_CURSOR.md

```
Layer 1: 技术基础（生死攸关）
  → Canvas渲染、事件监听、光标显示
  → 必须100%正常

Layer 2: 功能实现（能玩）
  → 商店逻辑、购买流程、UI交互
  → 依赖Layer 1

Layer 3: 体验优化（好玩）
  → 价格平衡、反馈优化
  → 依赖Layer 1+2
```

**验证规则**：
- ✅ 必须逐层验证，不能跳过
- ✅ 下层失败时，上层验证无意义
- ❌ 禁止假设下层正常

---

## ❓ 待明确的指导思想

以下问题需要您明确，以便完善文档和开发规范：

### A. 游戏设计方向

**问题1**: 游戏的核心乐趣点应该是什么？
- [ ] 策略布局（组件摆放和组合）
- [ ] Roguelike随机性
- [ ] 资源管理平衡
- [ ] 战斗爽快感
- [ ] 其他：___________

**问题2**: 游戏难度曲线？
- [ ] 轻松休闲（新手友好）
- [ ] 适中挑战
- [ ] 硬核高难
- [ ] 可选难度

---

### B. 文档风格

**问题3**: 您希望文档是什么风格？
- [ ] 简洁实用型（只写必要信息）
- [ ] 详细教程型（大量示例和解释）
- [ ] 技术参考型（侧重API和代码细节）
- [ ] 混合型（不同文档不同风格）

**问题4**: 代码注释的详细程度？
- [ ] 最小化（只注释复杂逻辑）
- [ ] 适中（每个函数有文档注释）
- [ ] 详细（大部分代码都有注释）
- [ ] 极详细（适合新手学习）

---

### C. 协作方式

**问题5**: 遇到问题时，您希望我？
- [ ] 立即停止，报告问题，等待指示
- [ ] 尝试修复，失败后报告
- [ ] 深入分析根本原因，提供完整方案
- [ ] 其他：___________

**问题6**: 开发节奏？
- [ ] 谨慎型（每次只改一个小功能）
- [ ] 平衡型（一次迭代2-3个相关功能）
- [ ] 激进型（快速实现多个功能，集中测试）

---

### D. 项目定位

**问题7**: 项目的最终目标是？
- [ ] 个人学习项目
- [ ] 可发布的独立游戏
- [ ] 技术演示
- [ ] 开源社区项目
- [ ] 其他：___________

**问题8**: 代码质量要求？
- [ ] 快速原型，可读性次要
- [ ] 平衡可读性和开发速度
- [ ] 高质量代码，严格规范
- [ ] 其他：___________

---

## 📝 如何使用本文档

### 对于开发者（我）

1. **每次开始工作前**，重读"已明确的指导思想"
2. **遇到决策时**，参考优先级和分层原则
3. **完成功能后**，对照冒烟测试清单验证
4. **有疑问时**，参考"待明确"部分，询问用户

### 对于用户（您）

1. **回答"待明确"部分的问题**，帮助完善指导思想
2. **如果我违反了已明确的原则**，直接指出
3. **如果发现新的指导原则**，告诉我更新此文档

---

## 🔄 文档更新

**更新频率**: 每当发现新的指导原则或做出重要决策时

**更新流程**:
1. 识别新原则
2. 更新本文档
3. 确保所有开发者知晓
4. 在后续工作中遵循

---

## 💡 关键经验教训

### 从光标问题中学到的

1. **不要假设**：即使是"光标可见"这种基础功能，也要验证
2. **优先级至关重要**：P0问题必须立即修复，不能被P2/P3分心
3. **用户视角优先**：从"打开游戏第一眼看到什么"开始测试
4. **分层验证**：下层失败时，上层优化毫无意义

### 禁止的行为

- ❌ 只看代码不运行
- ❌ 假设底层功能正常
- ❌ 跳过冒烟测试
- ❌ 优先级倒置（先做P2，忽略P0）
- ❌ 没有完整游戏流程测试就提交

---

**遵循这些原则，才能确保每次迭代都是真正的进步！**
