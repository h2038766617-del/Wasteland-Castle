# 🐛 已知问题

**项目**: Wasteland Castle
**最后更新**: 2026-01-12
**状态**: 活跃维护

本文档记录当前已知的问题和待改进项。

---

## 📋 问题分类

根据当前阶段和影响，问题分为：
- **P0 - 阻断性**: 必须立即修复（游戏无法运行）
- **P1 - 严重性**: 当天修复（核心功能失效）
- **P2 - 一般性**: 本周修复（体验不佳）
- **P3 - 优化性**: 待定（锦上添花）

**注**: 根据[核心指导思想](../GUIDING_PRINCIPLES.md)，所有问题最终都要解决，优先级只影响处理顺序。

---

## ✅ 已修复问题（参考FIX_HISTORY.md）

- [x] 鼠标光标不可见 - P0（2026-01-12修复）
- [x] 商店价格过高导致无法购买 - P1（2026-01-12修复）
- [x] 刷新成本过高导致死锁 - P1（2026-01-12修复）

详见 [修复历史](./FIX_HISTORY.md)

---

## 🚨 当前已知问题

### P0 - 阻断性问题

**目前无P0问题** ✅

### P1 - 严重性问题

#### 待验证：完整MVP流程

**描述**: 需要验证完整游戏流程是否可玩通

**影响**: 如果MVP流程不通，游戏无法正常体验

**验证步骤**:
```
□ 启动游戏 → 看到光标 ✅（已验证）
□ 购买组件 → 进入仓库 ✅（已验证）
□ 拖拽组件 → 放置到网格 → 邻接加成生效 ⚠️（待验证）
□ 进入战斗 → 炮塔攻击 → 击败敌人 ⚠️（待验证）
□ 完成旅途 → 获得奖励 → 回到安全屋 ⚠️（待验证）
```

**状态**: 🔄 待验证
**优先级**: P1（当天验证）
**负责人**: 待分配
**创建日期**: 2026-01-12

---

### P2 - 一般性问题

#### 1. 经济平衡待验证

**描述**: 当前价格和资源已调整，但实际游戏平衡性未验证

**详情**:
- 初始金币150 - 是否合理？
- 商品价格降低40% - 是否平衡？
- 弹药消耗 vs 敌人掉落 - 能否持续？
- 刷新成本5金币 - 是否合理？

**影响**: 游戏体验，可能导致太简单或太难

**状态**: 📊 待测试
**优先级**: P2（本周验证）
**相关文档**: [CRITICAL_BUG_FOUND.md](../../CRITICAL_BUG_FOUND.md)

#### 2. UI反馈不够明显

**描述**: 部分操作缺乏明显的用户反馈

**具体问题**:
- 购买成功后没有动画反馈（只有console日志）
- 金币扣除没有动画
- 组件飞入仓库没有动画
- "金币不足"提示不够明显（只是文字变灰）

**影响**: 用户可能不确定操作是否成功

**状态**: 💡 待改进
**优先级**: P2

#### 3. 邻接加成视觉反馈

**描述**: 玩家放置组件后，看不到邻接加成的效果

**建议改进**:
- 放置后显示加成数值（+10% 攻击力）
- 相邻组件高亮显示
- 加成效果的视觉提示

**影响**: 策略深度不明显

**状态**: 💡 待改进
**优先级**: P2

#### 4. 新手引导缺失

**描述**: 首次进入游戏，玩家不知道该做什么

**问题**:
- 没有教程
- 没有提示文字
- 操作说明在帮助页面（按H），但玩家可能不知道

**建议**:
- 添加首次进入的引导动画
- 关键操作的提示文字
- 简化版教程

**影响**: 新玩家上手难度高

**状态**: 📝 待设计
**优先级**: P2

---

### P3 - 优化性问题

#### 1. 音效缺失

**描述**: 游戏完全没有音效

**建议添加**:
- 购买音效
- 射击音效
- 击中音效
- 敌人被击败音效
- UI点击音效

**状态**: 🎵 未开始
**优先级**: P3

#### 2. 视觉效果可以更丰富

**描述**: 当前视觉效果较简单

**建议改进**:
- 更丰富的粒子效果
- 敌人被击败动画
- 商品购买动画
- 组件放置动画
- 背景视觉丰富度

**状态**: 🎨 未开始
**优先级**: P3

#### 3. 性能优化

**描述**: 未进行系统性能能优化

**建议**:
- 对象池（复用子弹、粒子）
- 只渲染可见对象
- Canvas优化

**状态**: 🚀 未开始
**优先级**: P3（发布前）

---

## 🔍 待调查问题

### 可能存在的问题（需验证）

#### 1. 弹药经济崩溃

**来源**: [CRITICAL_BUG_FOUND.md](../../CRITICAL_BUG_FOUND.md)

**描述**: 理论分析显示弹药消耗可能大于获得

**状态**: ⚠️ 需要实际游戏测试验证
**如果确认**: 升级为P1，立即修复

#### 2. 资源节点生成频率

**描述**: 10秒才生成1个资源节点，可能不够

**状态**: ⚠️ 需要实际游戏测试验证

#### 3. 多个核心组件的平衡性

**描述**: 当前可以放置多个CORE，是否平衡？

**疑问**:
- 3个CORE是否太强？
- 还是应该限制只能1个CORE？
- 多CORE的策略深度如何？

**状态**: 🤔 设计决策待定

---

## 📝 功能请求

### 未来可能添加的功能

#### 1. 成就系统
- 击败100个敌人
- 完成10次旅途
- 收集所有组件

**优先级**: 低
**状态**: 💭 构思中

#### 2. 可选难度
- 简单/普通/困难/地狱
- 不同难度不同奖励

**优先级**: 中
**状态**: 💭 构思中

#### 3. 更多组件类型
- 治疗组件
- 特殊效果组件
- 组合技组件

**优先级**: 中
**状态**: 💭 构思中

#### 4. 存档系统
- LocalStorage保存进度
- 继续上次游戏

**优先级**: 中
**状态**: 💭 构思中

---

## 🔄 问题处理流程

### 发现新问题时

1. **记录问题**
   ```
   - 标题
   - 描述
   - 重现步骤
   - 影响范围
   - 优先级
   ```

2. **更新本文档**
   - 添加到对应分类
   - 标注状态和优先级
   - 分配负责人（如需要）

3. **创建修复计划**
   - 如果是P0/P1，立即修复
   - 如果是P2，本周计划
   - 如果是P3，记录待定

4. **修复后更新**
   - 标记为已修复 ✅
   - 移动到FIX_HISTORY.md
   - 记录修复方法

---

## 📊 问题统计

**截至 2026-01-12**:
- P0问题: 0个 ✅
- P1问题: 1个（待验证）
- P2问题: 4个
- P3问题: 3个
- 待调查: 3个
- 功能请求: 4个

**总计**: 8个已知问题 + 3个待调查 + 4个功能请求

---

## 🎯 本周重点

根据当前状态，本周应重点关注：

1. **验证MVP完整流程** ⭐ 最重要
   - 完整玩一遍游戏
   - 确认所有核心功能可用
   - 记录发现的问题

2. **测试经济平衡**
   - 玩3-5局完整游戏
   - 记录资源数据
   - 调整参数

3. **改进UI反馈**
   - 添加购买成功动画
   - 优化"金币不足"提示
   - 邻接加成视觉反馈

---

## 📞 报告问题

### 如何报告新问题

1. **检查是否已存在**
   - 查看本文档
   - 搜索关键词

2. **提供详细信息**
   - 问题标题
   - 详细描述
   - 重现步骤
   - 截图或录屏
   - Console日志

3. **更新本文档**
   - 添加到对应分类
   - 标注优先级
   - 提交PR

---

## 🔗 相关文档

- [修复历史](./FIX_HISTORY.md) - 已修复问题记录
- [核心指导思想](../GUIDING_PRINCIPLES.md) - 问题优先级原则
- [测试清单](../TESTING_CHECKLIST.md) - 发现问题的测试方法
- [开发指南](../DEV_GUIDE.md) - 问题处理流程

---

**定期更新此文档，保持问题追踪的准确性！**
